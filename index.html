local HttpService = game:GetService("HttpService")
local StarterGui = game:GetService("StarterGui")
local LuaName = "Blueflare"

StarterGui:SetCore("SendNotification", {
	Title = LuaName,
	Text = "Intializing Authentication...",
	Duration = 5
})

--* Configuration *--
local initialized = false
local sessionid = ""


--* Application Details *--
Name = "Leviform_'s Application" --* Application Name
Ownerid = "dDrbxn2azH" --* OwnerID
APPVersion = "1.0"     --* Application Version

local req = game:HttpGet('https://keyauth.win/api/1.1/?name=' .. Name .. '&ownerid=' .. Ownerid .. '&type=init&ver=' .. APPVersion)

if req == "KeyAuth_Invalid" then 
   print(" Error: Application not found.")

   StarterGui:SetCore("SendNotification", {
	   Title = LuaName,
	   Text = " Error: Application not found.",
	   Duration = 3
   })

   return false
end

local data = HttpService:JSONDecode(req)

if data.success == true then
   initialized = true
   sessionid = data.sessionid
   --print(req)
elseif (data.message == "invalidver") then
   print(" Error: Wrong application version..")

   StarterGui:SetCore("SendNotification", {
	   Title = LuaName,
	   Text = " Error: Wrong application version..",
	   Duration = 3
   })

   return false
else
   print(" Error: " .. data.message)
   return false
end

print("\n\n Licensing... \n")
local req = game:HttpGet('https://keyauth.win/api/1.1/?name=' .. Name .. '&ownerid=' .. Ownerid .. '&type=license&key=' .. License ..'&ver=' .. APPVersion .. '&sessionid=' .. sessionid)
local data = HttpService:JSONDecode(req)


if data.success == false then 
    StarterGui:SetCore("SendNotification", {
	    Title = LuaName,
	    Text = " Error: " .. data.message,
	    Duration = 5
    })

    return false
end

StarterGui:SetCore("SendNotification", {
	Title = LuaName,
	Text = " Successfully Authorized :)",
	Duration = 5
})


local AkaliNotif = loadstring(game:HttpGet("https://raw.githubusercontent.com/CheatUserzz/RobloxOpenSourceScripts/refs/heads/main/TsNotificactionSource.lua"))()
local Notify = AkaliNotif.Notify

local SupportedGames = {
    [121864768012064] = "https://api.junkie-development.de/api/v1/luascripts/public/aaab734c9149b63278bb8f84cbb6933846bbc4e83c9ba56cbe17415bdd912df2/download", -- fish it
    [9876543210] = "https://api.junkie-development.de/api/v1/luascripts/public/04ef165f9563196fc7576f984f9380b1b68bb45af7fd42dcee99f8ea12fd87d7/download", -- Flick
    [893973440] = "https://api.junkie-development.de/api/v1/luascripts/public/29cd8f8806c34f850d822a1461ad662c4400b82b1a8b0a895be9c820bfd3563f/download", -- Flee the facility 
    [99567941238278] = "https://raw.githubusercontent.com/BloxCrypto/All-scripts/refs/heads/main/5R.lua", -- Ink Game
}

local UniversalScript = "https://api.junkie-development.de/api/v1/luascripts/public/83a8e0af15f71aa47fe0e792a528688b56d5b1e9750496c7821e5eb704de6030/download"

local placeId = game.PlaceId

if SupportedGames[placeId] then
    
    Notify({
        Title = "Blueflare NOTIFY",
        Description = "Supported game found! Loading game script...",
        Duration = 4
    })

    local success, err = pcall(function()
        loadstring(game:HttpGet(SupportedGames[placeId]))()
    end)

    if not success then
        Notify({
            Title = "Blueflare NOTIFY | Error",
            Description = "Failed to load game script:\n" .. tostring(err),
            Duration = 6
        })
    else
        Notify({
            Title = "Blueflare NOTIFY",
            Description = "Game script loaded successfully!",
            Duration = 3
        })
    end

else

    Notify({
        Title = "Blueflare NOTIFY | Universal",
        Description = "Game not supported.\nLoading universal script instead...",
        Duration = 6
    })

    -- Load universal fallback
    local success, err = pcall(function()
        loadstring(game:HttpGet(UniversalScript))()
    end)

    if not success then
        Notify({
            Title = "Blueflare | Error",
            Description = "Failed to load universal script:\n" .. tostring(err),
            Duration = 6
        })
    else
        Notify({
            Title = "Blueflare NOTIFY",
            Description = "Universal script loaded!",
            Duration = 3
        })
    end

end 